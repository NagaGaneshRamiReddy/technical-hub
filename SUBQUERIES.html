

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="aws.css">
    <link rel="stylesheet" href="body.css">
    <title>SQL Roadmap</title>
    
    </head>
    <body class="body">

   
        <header>
            <div class="logo-container">
                <div class="tree">
                    <div class="trunk"></div>
                    <div class="leaves"></div>
                </div>
                <div class="text">TreeLearners</div>
                
    
        <div id="main" class="main">
            <button class="openbtn" onclick="openNav()">&#9776;</button>
            <button class="openbtn homebtn" onclick="goHome()">
                &#8962; Home
            </button>
            <button class="openbtn compbtn" onclick="gocomp()">
                <i class="fas fa-code"></i> SQL Compiler
            </button>
            <button class="openbtn videobtn" onclick="govideo()">
                <i class="fas fa-video"></i> Video
            </button>
            <button class="openbtn labs" onclick="goprojects()">
           
                <i class="fas fa-folder-open"></i> Projects
            </button>
            <button class="openbtn interviewbtn" onclick="gointerviewpro()">
                <i class="fas fa-user-tie"></i> Interview Preparation
            </button>
            <button class="openbtn quizbtn" onclick="goquizpro()">
                <i class="fas fa-question-circle"></i> SQL Quiz
            </button>
        </div>
            </div>
        </header>
        
        <header>
            <div class="logo-container">
                <div class="tree">
                    <div class="trunk"></div>
                    <div class="leaves"></div>
                </div>
                <div class="text">TreeLearners</div>
                </div></header>
        <div id="mySidebar" class="sidebar">
            <!-- Top Box with Icon and Title -->
            <div class="top-box">
                <i class="fas fa-database" style="font-size: 60px;padding-left: 16px; color: #e27f05;"></i>
                <h2 class="jk">SQL Tutorial</h2>
            </div>
        
            <!-- Close button and sidebar content -->
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        
            
    
        <a href="SQLRoadmaps.html" target="_blank"><b class="b12">SQL Roadmap</b></a>
        
            <ul>
                 
        <a href="Introduction to SQL.html">Introduction to SQL</a>
            <li><a href="What is SQL.html">What is SQL?</a></li>
            <li><a href="History of SQL.html">History of SQL</a></li>
            <li><a href="Installing SQL.html">Installing SQL</a></li>
            <li><a href="SQL Syntax.html">SQL Syntax</a></li>
        </ul>
    
        <h3>Basic SQL Commands</h3>
        <a href="Basic SQL Commands.html">Basic SQL Commands</a>
        <ul>
            <li><a href="SELECT Statement.html">SELECT Statement</a></li>
            <li><a href="WHERE Clause.html">WHERE Clause</a></li>
            <li><a href="ORDER BY Clause.html">ORDER BY Clause</a></li>
            <li><a href="INSERT INTO Statement.html">INSERT INTO Statement</a></li>
            <li><a href="UPDATE Statement.html">UPDATE Statement</a></li>
            <li><a href="DELETE Statement.html">DELETE Statement</a></li>
        </ul>
    
        <h3>Advanced SQL Commands</h3>
        <a href="Advanced SQL Commands.html">Advanced SQL Commands</a>
        <ul>
            <li>
                <a href="JOINS.html">JOINS</a>
                <ul>
                    <li><a href="INNER JOIN.html">INNER JOIN</a></li>
                    <li><a href="LEFT JOIN.html">LEFT JOIN</a></li>
                    <li><a href="RIGHT JOIN.html">RIGHT JOIN</a></li>
                    <li><a href="FULL JOIN.html">FULL JOIN</a></li>
                </ul>
            </li>
            <li><a href="UNION.html">UNION</a></li>
            <li><a href="GROUP BY.html">GROUP BY</a></li>
            <li><a href="HAVING Clause.html">HAVING Clause</a></li>
            <li><a href="SUBQUERIES.html">SUBQUERIES</a></li>
            <li><a href="Indexes.html">Indexes</a></li>
        </ul>
    
        <h3>Database Design</h3>
        <a href="Database Design.html">Database Design</a>
        <ul>
            <li><a href="normalization_sql.html">Normalization</a></li>
            <li><a href="ER Models.html">ER Models</a></li>
            <li><a href="Primary and Foreign Keys.html">Primary and Foreign Keys</a></li>
            <li><a href="datatypes_sql.html".html">Data Types</a></li>
        </ul>
    
        <h3>Functions in SQL</h3>
        <a href="Functions in SQL.html">Functions in SQL</a>
        <ul>
            <li><a href="Aggregate Functions.html">Aggregate Functions</a></li>
            <li><a href="String Functions.html">String Functions</a></li>
            <li><a href="Date Functions.html">Date Functions</a></li>
            <li><a href="Mathematical Functions.html">Mathematical Functions</a></li>
            <li><a href="Conversion Functions.html">Conversion Functions</a></li>
        </ul>
    
        <h3>Stored Procedures and Triggers</h3>
        <a href="Stored Procedures and Triggers.html">Stored Procedures and Triggers</a>
        <ul>
            <li><a href="Creating Stored Procedures.html">Creating Stored Procedures</a></li>
            <li><a href="Executing Stored Procedures.html">Executing Stored Procedures</a></li>
            <li><a href="Creating Triggers.html">Creating Triggers</a></li>
            <li><a href="Triggering Events.html">Triggering Events</a></li>
        </ul>
    
        <h3>Transactions in SQL</h3>
        <a href="Transactions in SQL.html">Transactions in SQL</a>
        <ul>
            <li><a href="Transaction Control Commands.html">Transaction Control Commands</a></li>
            <li><a href="COMMIT.html">COMMIT</a></li>
            <li><a href="ROLLBACK.html">ROLLBACK</a></li>
            <li><a href="SAVEPOINT.html">SAVEPOINT</a></li>
            <li><a href="SET TRANSACTION.html">SET TRANSACTION</a></li>
        </ul>
    
        <h3>Performance Tuning</h3>
        <a href="Performance Tuning_sql.html">Performance Tuning</a>
        <ul>
            <li><a href="Query Optimization.html">Query Optimization</a></li>
            <li><a href="Indexing Strategies.html">Indexing Strategies</a></li>
            <li><a href="Analyzing Query Plans.html">Analyzing Query Plans</a></li>
            <li><a href="Partitioning.html">Partitioning</a></li>
            <li><a href="Caching.html">Caching</a></li>
        </ul>
    
        <h3>Advanced Topics</h3>
        <a href="Advanced Topics_sql.html">Advanced Topics</a>
        <ul>
            <li><a href="Views.html">Views</a></li>
            <li><a href="Materialized Views.html">Materialized Views</a></li>
            <li><a href="Data Warehousing.html">Data Warehousing</a></li>
            <li><a href="NoSQL Databases.html">NoSQL Databases</a></li>
            <li><a href="Big Data and SQL.html">Big Data and SQL</a></li>
        </ul>
    </div>
    
    
        <script>
    
            function openNav() {
                document.getElementById("mySidebar").style.left = "0";
                document.getElementById("main").classList.add("sidebar-open");
            }
            function closeNav() {
                document.getElementById("mySidebar").style.left = "-250px";
                document.getElementById("main").classList.remove("sidebar-open");
            }
    
        
            function toggleSubtopics(event) {
                const stage = event.currentTarget;
                const subtopics = stage.nextElementSibling;
                subtopics.classList.toggle('show');
            }
    
           
            function goHome() {
        window.location.href = "index.html";
    }
    function gointerviewpro() {
        window.location.href = "SQL_interviews.html";
    }
    function goquizpro() {
        window.location.href = "SQL_quiz.html";
    }
    function goprojects() {
        window.location.href = "SQL_project.html";
    }
    function gocomp() {
        window.location.href = "SQl Compiler.html";
    }
    function goPrevious() {
        window.location.href = "HAVING Clause.html";
    }
    function goNext() {
        window.location.href ="Indexes.html";
    }
        </script>
        <div class="container-1">
        <div class="content"> <div class="top-box1">
            <i class="fas fa-database" style="font-size: 70px;padding-left: 16px;  color: #07fe45;"></i>
            <h2 class="jk">SQL Tutorial</h2><div class="div1">SUBQUERIES</div></div>
        <div id="main1" class="main1">
            <button class="openbtn prevbtn1" onclick="goPrevious()">&#9664; Previous</button>
            <button class="openbtn nextbtn1" onclick="goNext()">&#9654; Next</button>
        </div>
    
<h2>SQL Subqueries</h2>
<p>A <strong>subquery</strong> (or nested query) is a query embedded within another SQL query. It is used to perform operations that involve multiple steps of querying. Subqueries can return a single value, a list of values, or a result set and are often used in SELECT, INSERT, UPDATE, and DELETE statements.</p>

<h2>Types of Subqueries</h2>
<ul>
    <li><strong>Scalar Subquery:</strong> Returns a single value. Used where a single value is expected, such as in a SELECT list or WHERE clause.</li>
    <li><strong>Single-Row Subquery:</strong> Returns a single row of results. Used when comparing a column to a single row of results.</li>
    <li><strong>Multiple-Row Subquery:</strong> Returns multiple rows of results. Often used with operators like IN, ANY, or ALL.</li>
    <li><strong>Correlated Subquery:</strong> References columns from the outer query. Executes once for each row processed by the outer query.</li>
    <li><strong>Non-Correlated Subquery:</strong> Independent of the outer query and can be executed on its own.</li>
</ul>

<h2>Basic Syntax</h2>
<pre>
    SELECT columns
    FROM table
    WHERE column operator (SELECT columns FROM table WHERE condition);
</pre>
<ul>
    <li><strong>columns</strong> - The columns you want to retrieve.</li>
    <li><strong>table</strong> - The table from which you are retrieving data.</li>
    <li><strong>column</strong> - The column you are comparing.</li>
    <li><strong>operator</strong> - The comparison operator (e.g., =, >, <).</li>
    <li><strong>condition</strong> - The condition applied in the subquery.</li>
</ul>

<h2>Examples of Subqueries</h2>

<h3>1. Scalar Subquery</h3>
<p>Retrieve employees who have the highest salary:</p>
<pre>
    SELECT emp_name, salary
    FROM employees
    WHERE salary = (SELECT MAX(salary) FROM employees);
</pre>
<p>This query retrieves employees with a salary equal to the highest salary found in the <code>employees</code> table.</p>

<h3>2. Single-Row Subquery</h3>
<p>Retrieve employees who work in the department with the ID 10:</p>
<pre>
    SELECT emp_name
    FROM employees
    WHERE dept_id = (SELECT dept_id FROM departments WHERE dept_name = 'Sales');
</pre>
<p>This query selects employees from the <code>employees</code> table where the <code>dept_id</code> matches the ID of the 'Sales' department.</p>

<h3>3. Multiple-Row Subquery</h3>
<p>Retrieve employees who work in departments located in 'New York':</p>
<pre>
    SELECT emp_name
    FROM employees
    WHERE dept_id IN (
        SELECT dept_id
        FROM departments
        WHERE location = 'New York'
    );
</pre>
<p>This query selects employees whose <code>dept_id</code> is in the list of department IDs located in 'New York'.</p>

<h3>4. Correlated Subquery</h3>
<p>Retrieve employees whose salary is greater than the average salary in their department:</p>
<pre>
    SELECT emp_name, salary
    FROM employees e1
    WHERE salary > (
        SELECT AVG(salary)
        FROM employees e2
        WHERE e1.dept_id = e2.dept_id
    );
</pre>
<p>This query retrieves employees whose salary is higher than the average salary of their own department. The subquery references the outer query’s <code>dept_id</code>.</p>

<h3>5. Non-Correlated Subquery</h3>
<p>Retrieve departments with more employees than the department with ID 1:</p>
<pre>
    SELECT dept_id, COUNT(*) AS num_employees
    FROM employees
    GROUP BY dept_id
    HAVING COUNT(*) > (
        SELECT COUNT(*)
        FROM employees
        WHERE dept_id = 1
    );
</pre>
<p>This query returns departments with a higher number of employees than the department with ID 1. The subquery counts employees in department 1.</p>

<h2>Advanced Usage of Subqueries</h2>

<h3>1. Subquery in INSERT Statement</h3>
<p>Insert a new record into the <code>employees</code> table with a department ID from the <code>departments</code> table:</p>
<pre>
    INSERT INTO employees (emp_name, dept_id)
    VALUES ('John Doe', (
        SELECT dept_id
        FROM departments
        WHERE dept_name = 'Marketing'
    ));
</pre>
<p>This query inserts a new employee named 'John Doe' into the department with the name 'Marketing'. The subquery retrieves the department ID for the 'Marketing' department.</p>

<h3>2. Subquery in UPDATE Statement</h3>
<p>Update the salary of employees in the department with the highest average salary:</p>
<pre>
    UPDATE employees
    SET salary = salary * 1.10
    WHERE dept_id = (
        SELECT dept_id
        FROM (
            SELECT dept_id, AVG(salary) AS avg_salary
            FROM employees
            GROUP BY dept_id
            ORDER BY avg_salary DESC
            LIMIT 1
        ) AS highest_avg_salary
    );
</pre>
<p>This query increases the salary of employees in the department with the highest average salary by 10%. The subquery determines which department has the highest average salary.</p>

<h2>Learning Resources</h2>
<div class="resources">
    <ul>
        <li><a href="https://www.w3schools.com/sql/sql_subqueries.asp" target="_blank">SQL Subqueries - W3Schools</a></li>
        <li><a href="https://docs.microsoft.com/en-us/sql/t-sql/queries/select-transact-sql" target="_blank">SQL Subqueries - Microsoft Documentation</a></li>
        <li><a href="https://www.postgresql.org/docs/current/queries-table-expressions.html" target="_blank">PostgreSQL Subqueries - PostgreSQL Documentation</a></li>
    </ul>
</div>

<h2>Summary</h2>
<p>Subqueries are a powerful feature in SQL that allow you to nest queries within other queries. They can be used to perform complex queries that involve multiple steps and operations. Understanding how to use subqueries effectively can enhance your ability to retrieve and manipulate data.</p>
<div id="main1" class="main1">
    <button class="openbtn prevbtn1" onclick="goPrevious()">&#9664; Previous</button>
    <button class="openbtn nextbtn1" onclick="goNext()">&#9654; Next</button>
</div>
</div>
